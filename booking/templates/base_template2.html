<!DOCTYPE html>
{% load static %}
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/null.css' %}">
    <link rel="stylesheet" href="{% static 'css/style_new2.css' %}">
    <title>Главная</title>
</head>
<body>
    <div class="wrapper">
        <header>
            <div class="header_wrapper">
                <div class="logo_info">
                    <div class="container">
                        <div class="logo_info_wrapper">

                        </div>
                    </div>
                </div>
                <nav class="header_nav">
                    <div class="container">
                        <div class="header_nav_wrapper">
                            <ul class="header_nav_list">
                                <li class="header_nav_item">
                                    <a href="#">Главная</a>
                                </li>
                                <li class="header_nav_item">
                                    <a href="#">Бронирование</a>
                                </li>
                                <li class="header_nav_item">
                                    <a href="#">Авто</a>
                                </li>
                                <li class="header_nav_item">
                                    <a href="#">Статистика</a>
                                </li>
                                <li class="header_nav_item">
                                    <a href="{% url 'admin:index' %}">Админ</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
            </div>
        </header>
        <main>
            <div class="main_wrapper">
                <div class="car_schedule">
                    <div class="container">
                        <div class="car_schedule_wrapper">
                            <div class="two_tables">
                                <figure class="table-container">
                                    <table>
                                        <caption style="font-size: 20px"></caption>
                                        <thead>
                                            <tr class="table-header">
                                                <th>Дата</th>
                                                <th>Авто</th>
                                                <th>Инженер</th>
                                                <th>Город</th>
                                                <th>Комментарий</th>
                                                <th>Подтверждение</th>
                                            </tr>
                                        </thead>
                                        {% for day in form_list_first %}
                                            <tbody class="table_day">
                                                {% for car_note in day %}
                                                    <tr class="table_day_row_one table_day_row">
                                                        {% if car_note == day.0 %}
                                                            {% if day_today == car_note.1.date %}
                                                                <td class="table_day_date_today" rowspan="3">
                                                                    <div>
                                                                        <p>{{ car_note.1.date}}</p>
                                                                        <p>{{ car_note.1.date|date:"l" }}</p>
                                                                    </div>
                                                                </td>
                                                            {% else %}
                                                                <td class="table_day_date" rowspan="3">
                                                                    {{ car_note.1.date }}
                                                                    {{ car_note.1.date|date:"l" }}
                                                                </td>
                                                            {% endif %}
                                                        {% endif %}
                                                        <td>{{ car_note.1.car }}</td>
                                                        <form action="" method="POST">
                                                            {% csrf_token %}
                                                            <td>
                                                                {% if car_note.1.engineer is not None %}
                                                                    {{ car_note.1.engineer }}
                                                                {% endif %}
                                                            </td>
                                                            <td class="table_day_form">{{ car_note.0.city }}</td>
                                                            <td>{{ car_note.0.comment}}</td>
                                                            <td>
                                                                {% if not car_note.1.engineer %}
                                                                    <button class="apply_button" type="submit" name="{{ car_note.1.id }}">Применить</button>
                                                                {% endif %}
                                                                {% if user.first_name == car_note.1.engineer %}
                                                                    <div class="change_cancel">
                                                                        <button class="change_button" type="submit" name="{{ car_note.1.id }}">Изменить</button>
                                                                        <a class="cancel_button" href="{% url 'cancel_note' car_note.1.id %}"><span>Отмена</span></a>
                                                                    </div>

                                                                {% endif %}
                                                            </td>
                                                        </form>
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        {% endfor %}
                                    </table>
                                </figure>
                                <figure class="table-container">
                                    <table>
                                        <caption style="font-size: 20px"></caption>
                                        <thead>
                                            <tr class="table-header">
                                                <th>Дата</th>
                                                <th>Авто</th>
                                                <th>Инженер</th>
                                                <th>Город</th>
                                                <th>Комментарий</th>
                                                <th>Подтверждение</th>
                                            </tr>
                                        </thead>
                                        {% for day in form_list_second %}
                                            <tbody class="table_day">
                                                {% for car_note in day %}
                                                    <tr class="table_day_row_one table_day_row">
                                                        {% if car_note == day.0 %}
                                                            {% if day_today == car_note.1.date %}
                                                                <td class="table_day_date_today" rowspan="3">
                                                                    <div>
                                                                        <p>{{ car_note.1.date}}</p>
                                                                        <p>{{ car_note.1.date|date:"l" }}</p>
                                                                    </div>
                                                                </td>
                                                            {% else %}
                                                                <td class="table_day_date" rowspan="3">
                                                                    {{ car_note.1.date }}
                                                                    {{ car_note.1.date|date:"l" }}
                                                                </td>
                                                            {% endif %}
                                                        {% endif %}
                                                        <td>{{ car_note.1.car }}</td>
                                                        <form action="" method="POST">
                                                            {% csrf_token %}
                                                            <td>
                                                                {% if car_note.1.engineer is not None %}
                                                                    {{ car_note.1.engineer }}
                                                                {% endif %}
                                                            </td>
                                                            <td class="table_day_form">{{ car_note.0.city }}</td>
                                                            <td>{{ car_note.0.comment}}</td>
                                                            <td>
                                                                {% if not car_note.1.engineer %}
                                                                    <button class="apply_button" type="submit" name="{{ car_note.1.id }}">Применить</button>
                                                                {% endif %}
                                                                {% if user.first_name == car_note.1.engineer %}
                                                                    <div class="change_cancel">
                                                                        <button class="change_button" type="submit" name="{{ car_note.1.id }}">Изменить</button>
                                                                        <a class="cancel_button" href="{% url 'cancel_note' car_note.1.id %}"><span>Отмена</span></a>
                                                                    </div>

                                                                {% endif %}
                                                            </td>
                                                        </form>
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        {% endfor %}
                                    </table>
                                </figure>
                            </div>
                            <div class="pagination">
                                <span class="step-links">
                                    {% if form_list.has_previous %}
                                        <a href="?page=1">&laquo; first</a>
                                        <a href="?page={{ form_list.previous_page_number }}">previous</a>
                                    {% endif %}

                                    <span class="current">
                                        Page {{ form_list.number }} of {{ form_list.paginator.num_pages }}.
                                    </span>

                                    {% if form_list.has_next %}
                                        <a href="?page={{ form_list.next_page_number }}">next</a>
                                        <a href="?page={{ form_list.paginator.num_pages }}">last &raquo;</a>
                                    {% endif %}
                                </span>
                            </div>
                            <div class="pagination2">
                                {% if form_list.has_previous %}
                                    <a class="btn btn-outline-primary mb-4" href="?page=1">Первая</a>
                                    <a class="btn btn-outline-primary mb-4" href="?page={{ form_list.previous_page_number }}"><<</a>
                                {% endif %}
                                {% for num in form_list.paginator.page_range %}
                                    {% if page_obj.number == num %}
                                        <a class="btn btn-primary mb-4" href="?page={{ num }}">{{ num }}</a>
                                    {% elif num > form_list.number|add:'-3' and num < form_list.number|add:'3' %}
                                        <a class="btn btn-outline-primary mb-4" href="?page={{ num }}">{{ num }}</a>
                                    {% endif %}
                                {% endfor %}
                                {% if form_list.has_next %}
                                    <a class="btn btn-outline-primary mb-4" href="?page={{ form_list.next_page_number }}">>></a>
                                    <a class="btn btn-outline-primary mb-4" href="?page={{ form_list.paginator.num_pages }}">Последняя</a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script src="{% static 'js/change_styles.js' %}"></script>
</body>
</html>